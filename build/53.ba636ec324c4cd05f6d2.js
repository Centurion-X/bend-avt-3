"use strict";(self.webpackChunkticket_sales2022=self.webpackChunkticket_sales2022||[]).push([[53],{4053:(B,b,l)=>{l.r(b),l.d(b,{AuthModule:()=>V});var r=l(8583),u=l(3679),e=l(3017),_=l(5921);const Z=["cb"],M=function(o,a,n){return{"p-checkbox-label":!0,"p-checkbox-label-active":o,"p-disabled":a,"p-checkbox-label-focus":n}};function k(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"label",7),e.NdJ("click",function(i){e.CHM(n);const s=e.oxw(),d=e.MAs(3);return s.onClick(i,d,!0)}),e._uU(1),e.qZA()}if(2&o){const n=e.oxw();e.Tol(n.labelStyleClass),e.Q6J("ngClass",e.kEZ(5,M,n.checked(),n.disabled,n.focused)),e.uIk("for",n.inputId),e.xp6(1),e.Oqu(n.label)}}const y=function(o,a,n){return{"p-checkbox p-component":!0,"p-checkbox-checked":o,"p-checkbox-disabled":a,"p-checkbox-focused":n}},A=function(o,a,n){return{"p-highlight":o,"p-disabled":a,"p-focus":n}},x={provide:u.JU,useExisting:(0,e.Gpc)(()=>c),multi:!0};let c=(()=>{class o{constructor(n){this.cd=n,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new e.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(n,t,i){n.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(n),i&&t.focus())}updateModel(n){let t;this.binary?(t=this.checked()?this.falseValue:this.trueValue,this.model=t,this.onModelChange(t)):(t=this.checked()?this.model.filter(i=>!_.gb.equals(i,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(t),this.model=t,this.formControl&&this.formControl.setValue(t)),this.onChange.emit({checked:t,originalEvent:n})}handleChange(n){this.readonly||this.updateModel(n)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(n){this.model=n,this.cd.markForCheck()}registerOnChange(n){this.onModelChange=n}registerOnTouched(n){this.onModelTouched=n}setDisabledState(n){this.disabled=n,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:_.gb.contains(this.value,this.model)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["p-checkbox"]],viewQuery:function(n,t){if(1&n&&e.Gf(Z,5),2&n){let i;e.iGM(i=e.CRH())&&(t.inputViewChild=i.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[e._Bn([x])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()})("change",function(d){return t.handleChange(d)}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.NdJ("click",function(d){e.CHM(i);const U=e.MAs(3);return t.onClick(d,U,!0)}),e._UZ(5,"span",5),e.qZA(),e.qZA(),e.YNc(6,k,2,9,"label",6)}2&n&&(e.Tol(t.styleClass),e.Q6J("ngStyle",t.style)("ngClass",e.kEZ(18,y,t.checked(),t.disabled,t.focused)),e.xp6(2),e.Q6J("readonly",t.readonly)("value",t.value)("checked",t.checked())("disabled",t.disabled),e.uIk("id",t.inputId)("name",t.name)("tabindex",t.tabindex)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("aria-checked",t.checked())("required",t.required),e.xp6(2),e.Q6J("ngClass",e.kEZ(22,A,t.checked(),t.disabled,t.focused)),e.xp6(1),e.Q6J("ngClass",t.checked()?t.checkboxIcon:null),e.xp6(1),e.Q6J("ngIf",t.label))},directives:[r.PC,r.mk,r.O5],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),o})(),w=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[r.ez]]}),o})();var p=l(1424),h=l(9783),g=l(3725),T=l(7773),m=l(1095),C=l(3565),J=l(3131);function q(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"input",10),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().cardNumber=i}),e.qZA(),e.qZA()}if(2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.cardNumber)}}function S(o,a){1&o&&(e.TgZ(0,"p",11),e._uU(1,"\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u044b"),e.qZA())}const v=function(o){return{"input-error":o}};let I=(()=>{class o{constructor(n,t,i,s){this.authService=n,this.messageService=t,this.router=i,this.userService=s,this.authorizationButtonText="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",this.cardText="\u2116 \u043a\u0430\u0440\u0442\u044b",this.loginText="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",this.passwordText="\u041f\u0430\u0440\u043e\u043b\u044c"}ngOnInit(){}onAuthorize(n){const t={card:this.cardNumber,login:this.login,password:this.password};let i=this.authService.checkUser(t);i?(this.userService.setToken(t.login),this.userService.setUser(t),this.router.navigate(["tickets/main"])):0==i?this.messageService.add({detail:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0451\u043d \u043f\u0430\u0440\u043e\u043b\u044c !!!",severity:"error",summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}):null==i&&this.messageService.add({detail:"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d !!!",severity:"warn",summary:"\u041d\u0435\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043c\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f"})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(C.e),e.Y36(h.ez),e.Y36(m.F0),e.Y36(J.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authorization"]],decls:17,vars:17,consts:[[1,"d-flex","flex-column","input-wrap"],[1,"mt-3"],["type","text","pInputText","",3,"ngClass","ngModel","ngModelChange"],["type","password","pInputText","",3,"ngClass","ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["name","checkboxes",1,"mt-5",3,"label","binary","ngModel","ngModelChange"],["class","mt-3",4,"ngIf","ngIfElse"],[1,"m-auto"],["type","button",1,"btn","btn-success","mt-4",3,"disabled","click"],["noCard",""],["type","text","pInputText","",3,"ngModel","ngModelChange"],[1,"mb-0"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(s){return t.login=s}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(s){return t.password=s}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"p-checkbox",5),e.NdJ("ngModelChange",function(s){return t.cardStatus=s}),e.qZA(),e.YNc(11,q,2,1,"div",6),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"button",8),e.NdJ("click",function(s){return t.onAuthorize(s)}),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.YNc(15,S,2,0,"ng-template",null,9,e.W1O)),2&n){const i=e.MAs(16);e.xp6(3),e.hij("",t.loginText," "),e.xp6(1),e.Q6J("ngClass",e.VKq(13,v,!t.login))("ngModel",t.login),e.xp6(3),e.hij("",t.passwordText," "),e.xp6(1),e.Q6J("ngClass",e.VKq(15,v,!t.password))("ngModel",t.password),e.xp6(2),e.Q6J("label",t.cardText)("binary",!0)("ngModel",t.cardStatus),e.xp6(1),e.Q6J("ngIf",t.cardStatus)("ngIfElse",i),e.xp6(2),e.Q6J("disabled",!t.login||!t.password),e.xp6(1),e.hij(" ",t.authorizationButtonText," ")}},directives:[u.Fj,p.o,r.mk,u.JJ,u.On,c,r.O5],styles:["*.input-error[_ngcontent-%COMP%]{border:1px solid red!important}*.input-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:150px}p[_ngcontent-%COMP%]{margin-right:7.5rem;margin-top:2.75rem}"]}),o})();var z=l(5685);function O(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"input",4),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().card=i}),e.qZA(),e.qZA()}if(2&o){const n=e.oxw();e.xp6(2),e.hij("",n.cardText," "),e.xp6(1),e.Q6J("ngModel",n.card)}}const f=function(o){return{"input-error":o}};let F=(()=>{class o{constructor(n,t){this.authService=n,this.messageService=t,this.cardText="\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b",this.loginText="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",this.mailText="\u041f\u043e\u0447\u0442\u0430",this.password1Text="\u041f\u0430\u0440\u043e\u043b\u044c",this.password2Text="\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",this.registrationButtonText="\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}ngOnInit(){this.showCard=z.e.settings.hasCard}onRegister(n){if(this.password1!==this.password2)return this.messageService.add({detail:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 !!!",severity:"error",summary:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}),!1;this.authService.setUser({card:this.card,login:this.login,mail:this.mail,password:this.password1},this.storage)?this.messageService.add({detail:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430 !",severity:"success",summary:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"}):this.messageService.add({detail:"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d !!!",severity:"warn",summary:"\u041d\u0435\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043c\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f"})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(C.e),e.Y36(h.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registration"]],decls:23,vars:22,consts:[[1,"d-flex","flex-column","input-wrap","m-auto"],[1,"mt-3"],["type","text","pInputText","",3,"ngClass","ngModel","ngModelChange"],["type","password","pInputText","",3,"ngClass","ngModel","ngModelChange"],["type","text","pInputText","",3,"ngModel","ngModelChange"],["class","mt-3",4,"ngIf"],[1,"m-auto"],["label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f","name","localStorage",1,"mt-4",3,"binary","ngModel","ngModelChange"],["type","button",1,"btn","btn-success","mt-4",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(s){return t.login=s}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(s){return t.password1=s}),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.TgZ(12,"input",3),e.NdJ("ngModelChange",function(s){return t.password2=s}),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"span"),e._uU(15),e.qZA(),e.TgZ(16,"input",4),e.NdJ("ngModelChange",function(s){return t.mail=s}),e.qZA(),e.qZA(),e.YNc(17,O,4,2,"div",5),e.TgZ(18,"div",6),e.TgZ(19,"p-checkbox",7),e.NdJ("ngModelChange",function(s){return t.storage=s}),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"button",8),e.NdJ("click",function(s){return t.onRegister(s)}),e._uU(22),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.hij("",t.loginText," "),e.xp6(1),e.Q6J("ngClass",e.VKq(16,f,!t.login))("ngModel",t.login),e.xp6(3),e.hij("",t.password1Text," "),e.xp6(1),e.Q6J("ngClass",e.VKq(18,f,!t.password1))("ngModel",t.password1),e.xp6(3),e.hij("",t.password2Text," "),e.xp6(1),e.Q6J("ngClass",e.VKq(20,f,!t.password2))("ngModel",t.password2),e.xp6(3),e.hij("",t.mailText," "),e.xp6(1),e.Q6J("ngModel",t.mail),e.xp6(1),e.Q6J("ngIf",t.showCard),e.xp6(2),e.Q6J("binary",!0)("ngModel",t.storage),e.xp6(2),e.Q6J("disabled",!t.login||!t.password1||!t.password2),e.xp6(1),e.hij(" ",t.registrationButtonText," "))},directives:[u.Fj,p.o,r.mk,u.JJ,u.On,r.O5,c],styles:["*.input-error[_ngcontent-%COMP%]{border:1px solid red!important}*.input-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:150px}"]}),o})();const N=[{component:(()=>{class o{constructor(n){this.authService=n}ngOnInit(){window.sessionStorage.removeItem("user")}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(C.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth"]],decls:7,vars:0,consts:[[1,"d-flex","mt-4"],[1,"m-auto"],["header","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"],["header","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"],["position","bottom-center"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"p-tabView",1),e.TgZ(2,"p-tabPanel",2),e._UZ(3,"app-authorization"),e.qZA(),e.TgZ(4,"p-tabPanel",3),e._UZ(5,"app-registration"),e.qZA(),e.qZA(),e.qZA(),e._UZ(6,"p-toast",4))},directives:[g.xf,g.x4,I,F,T.FN],styles:[""]}),o})(),path:""}];let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(N)],m.Bz]}),o})(),V=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[h.ez],imports:[[Q,w,r.ez,u.u5,p.j,g.LU,T.EV]]}),o})()}}]);